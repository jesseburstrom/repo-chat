.chat-interface {
  display: flex;
  flex-direction: column;
  gap: 15px; /* Spacing between messages */
}

.chat-message {
  max-width: 80%; /* Limit message width */
  padding: 10px 15px;
  border-radius: 18px;
  line-height: 1.5;
    word-wrap: break-word;
    overflow-wrap: break-word;
    background-color: #f1f3f4; /* Default background */
}

.chat-message.user {
  background-color: #e1f5fe; /* Light blue for user */
  align-self: flex-end; /* Align user messages to the right */
  border-bottom-right-radius: 4px; /* Style like bubbles */
}

.chat-message.model {
  background-color: #ffffff; /* White for model */
   border: 1px solid #e0e0e0;
  align-self: flex-start; /* Align model messages to the left */
   border-bottom-left-radius: 4px;
}


.message-role {
  font-weight: 500;
  font-size: 0.9em;
  color: #5f6368;
  display: block;
  margin-bottom: 4px;
}

.message-content {
   font-size: 1rem;
}

.message-content p {
  white-space: normal; /* Collapse whitespace, allow auto line breaks */
  margin-bottom: 1em; /* Add space between paragraphs */
}
.message-content br {
    /* Ensure <br> takes minimal space */
    content: "";
    display: block;
    margin-bottom: 0.5em; /* Adjust spacing between lines */
}

/* --- Code Block Styling --- */

/* NEW: Wrapper for positioning context */
.code-block-wrapper {
  position: relative; /* Establishes positioning context for the button */
  margin-bottom: 1em; /* Space below the code block */
  /* background-color: #f8f8f8; /* Move background here if desired */
  /* border-radius: 6px; */ /* Move radius here if desired */
}

/* NEW: Header containing label and button */
.code-block-header {
  display: flex;
  justify-content: space-between; /* Pushes label left, button right */
  align-items: center;
  padding: 4px 8px 2px 8px; /* Adjust padding as needed */
  background-color: #f0f0f0; /* Light background for the header area */
  border-top-left-radius: 6px; /* Match code block radius */
  border-top-right-radius: 6px; /* Match code block radius */
  border-bottom: 1px solid #e0e0e0; /* Separator line */
}


/* --- Language Label (Adjusted) --- */
.code-language-label {
/* display: block; Removed, now flex item */
font-size: 0.8em;
color: #5f6368;
font-family: sans-serif;
/* margin-bottom: 3px; Removed, handled by header padding */
/* padding-left: 5px; Removed, handled by header padding */
text-transform: capitalize;
}

/* --- NEW: Copy Button Styles --- */
.copy-code-button {
/* Position is handled by flexbox in header now */
padding: 2px 8px;
font-size: 0.75em;
font-family: sans-serif;
color: #333;
background-color: #e0e0e0;
border: 1px solid #ccc;
border-radius: 4px;
cursor: pointer;
transition: background-color 0.2s ease, color 0.2s ease;
margin-left: 10px; /* Space between label and button if they get close */
}

.copy-code-button:hover {
background-color: #d0d0d0;
border-color: #bbb;
}

.copy-code-button.copied {
background-color: #a5d6a7; /* Light green for success */
color: #1b5e20; /* Darker green text */
border-color: #81c784;
}
.copy-code-button.copied:hover {
   background-color: #a5d6a7; /* Keep success style on hover */
   color: #1b5e20;
}

/* --- Code Block Content Styling (Shikiji or fallback) --- */
/* Target BOTH the Shikiji div AND the fallback pre */
.code-block-wrapper > div[class*="shiki"], /* Direct child div from Shikiji */
.code-block-wrapper > pre[class*="language-"] /* Direct child pre (fallback) */
{
margin: 0 !important; /* Remove margin, wrapper handles it */
border-radius: 0 0 6px 6px; /* Only bottom corners rounded */
font-size: 0.9em !important;
overflow-x: auto;
padding: 10px !important;
line-height: 1.4;
white-space: pre;
background-color: #f8f8f8; /* Keep background on the code part */
/* border: 1px solid #e0e0e0; */ /* Optional: add border if needed */
/* border-top: none; */ /* Remove top border if adding border */
}

/* Keep inline code styles */
.message-content .inline-code {
background-color: #e8eaed;
padding: 0.1em 0.4em;
border-radius: 4px;
font-family: 'Courier New', Courier, monospace;
font-size: 0.9em;
}

/* Keep non-standard highlight style */
.non-standard-code-highlight {
font-weight: bold;
}